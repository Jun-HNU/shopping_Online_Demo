
tar -zxvf Vmshare-linux-win/elasticsearch-7.13.4-linux-x86_64.tar.gz -C /home/elk/
为elk启动，特意创建了elkuser这个普通用户
必须先启动 elasticsearch  再启动kibana
elk必须采用非root用户启动
su elkuser切换用户

adduser elkuser
su elkuser
gpasswd -a elkuser root //将用户elkuser加入到root组
gpasswd -d elkuser root //将用户elkuser从root组中移出
su root
---123456

chown -R elkuser /home/elk/elasticsearch-7.13.4


3.修改内核参数
echo "vm.swappiness=0" >> /etc/sysctl.conf
echo "vm.max_map_count=655350" >> /etc/sysctl.conf
xcall  /etc/sysctl.conf
sysctl -p
4.修改所有节点的linux资源限制，永久生效
cat /etc/security/limits.conf|grep -v "^#"
* soft    nofile  1024000
* hard    nofile  1024000
* soft    nproc   unlimited
* hard    nproc   unlimited
* soft    core    unlimited
* hard    core    unlimited
* soft    memlock unlimited
* hard    memlock unlimited
ulimit -SHn 1024000

或者
vi /etc/security/limits.conf
* hard nofile 655360
* soft nofile 131072
* hard nproc 4096
* soft nproc 2048
vi /etc/sysctl.conf
vm.max_map_count=655360
fs.file-max=655360
sysctl -p
vi /etc/security/limits.d/90-nproc.conf
max number of threads [1024] for user [es] likely too low, increase to at least [2048]

5.
mkdir -p {data,logs}
chown -R elkuser logs
chown -R elkuser data
5.修改配置文件，添加以下内容：
vim  elasticsearch.yml
vi jvm.options
-Xms2g
-Xmx2g


